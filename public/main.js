axios.get('/getGoods')
.then((res)=>{
    for(let item of res.data){
        const imgSrc = item.img.replace(/\\/g, '/');
        const prices = item.prices;
        const newPrice = prices[prices.length - 1];
        const oldPrice = prices[prices.length - 2];
        
        const $good = $(`
            <div class="good">
                <div class="pictureCon">
                    <div class="status">${item.status}</div>
                    <img src="${imgSrc}" alt="">
                        <div class="hoverIcons">
        <div class="icon">
            <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.777 19.1556L2.53618 10.9051C1.44325 9.81104 0.829193 8.32709 0.829102 6.77973C0.829011 5.23237 1.44289 3.74836 2.53569 2.65414C3.62849 1.55993 5.1107 0.94516 6.65625 0.945068C8.20179 0.944977 9.68407 1.55958 10.777 2.65366C11.8705 1.56081 13.3524 0.947017 14.8974 0.947017C16.4425 0.947017 17.9244 1.56081 19.0178 2.65366V2.65366C20.1089 3.74865 20.7217 5.2322 20.7217 6.7789C20.7217 8.3256 20.1089 9.80916 19.0178 10.9041L10.777 19.1556ZM6.6561 2.88994C5.88767 2.88991 5.13648 3.11805 4.49756 3.54548C3.85863 3.97292 3.36068 4.58046 3.06667 5.29126C2.77266 6.00206 2.6958 6.78419 2.84583 7.53873C2.99585 8.29326 3.36601 8.98631 3.90949 9.5302L10.777 16.4058L17.6445 9.5302C18.039 9.14408 18.3468 8.67829 18.5474 8.16381C18.7481 7.64933 18.837 7.09797 18.8082 6.54641C18.7795 5.99486 18.6337 5.45576 18.3806 4.96499C18.1276 4.47422 17.773 4.04303 17.3406 3.70013C16.9081 3.35722 16.4077 3.11046 15.8726 2.97626C15.3374 2.84206 14.7799 2.8235 14.237 2.92182C13.6942 3.02014 13.1785 3.23308 12.7242 3.54647C12.27 3.85986 11.8876 4.26652 11.6025 4.73937L10.777 6.07345L9.95146 4.73937C9.61068 4.17057 9.12729 3.70085 8.54925 3.37678C7.9712 3.0527 7.31858 2.88555 6.6561 2.89189V2.88994Z" fill="#757575"/>
            </svg>  
        </div>
        <div class="icon">
            <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.6798 16.1669H17.0611V14.5463C17.0611 14.3314 16.9758 14.1253 16.8241 13.9733C16.6723 13.8213 16.4664 13.736 16.2518 13.736C16.0371 13.736 15.8312 13.8213 15.6795 13.9733C15.5277 14.1253 15.4424 14.3314 15.4424 14.5463V16.1669H13.8237C13.609 16.1669 13.4032 16.2522 13.2514 16.4042C13.0996 16.5562 13.0143 16.7623 13.0143 16.9772C13.0143 17.1921 13.0996 17.3982 13.2514 17.5501C13.4032 17.7021 13.609 17.7875 13.8237 17.7875H15.4424V19.4081C15.4424 19.623 15.5277 19.8291 15.6795 19.981C15.8312 20.133 16.0371 20.2184 16.2518 20.2184C16.4664 20.2184 16.6723 20.133 16.8241 19.981C16.9758 19.8291 17.0611 19.623 17.0611 19.4081V17.7875H18.6798C18.8945 17.7875 19.1003 17.7021 19.2521 17.5501C19.4039 17.3982 19.4892 17.1921 19.4892 16.9772C19.4892 16.7623 19.4039 16.5562 19.2521 16.4042C19.1003 16.2522 18.8945 16.1669 18.6798 16.1669Z" fill="#757575"/>
                <path d="M17.0611 5.63293H14.6331C14.6331 4.3435 14.1214 3.10688 13.2108 2.19511C12.3001 1.28334 11.0649 0.771118 9.77696 0.771118C8.48904 0.771118 7.25386 1.28334 6.34317 2.19511C5.43247 3.10688 4.92084 4.3435 4.92084 5.63293H2.49279C1.84882 5.63293 1.23124 5.88904 0.775889 6.34492C0.32054 6.80081 0.0647278 7.41912 0.0647278 8.06383L0.0647278 16.1668C0.0660129 17.241 0.49278 18.2708 1.25142 19.0303C2.01005 19.7898 3.03862 20.2171 4.11149 20.2184H11.3957C11.6103 20.2184 11.8162 20.133 11.968 19.981C12.1197 19.8291 12.205 19.623 12.205 19.4081C12.205 19.1931 12.1197 18.987 11.968 18.8351C11.8162 18.6831 11.6103 18.5978 11.3957 18.5978H4.11149C3.46753 18.5978 2.84994 18.3416 2.39459 17.8858C1.93925 17.4299 1.68343 16.8116 1.68343 16.1668V8.06383C1.68343 7.84893 1.7687 7.64282 1.92049 7.49086C2.07227 7.3389 2.27813 7.25353 2.49279 7.25353H4.92084V8.87413C4.92084 9.08904 5.00611 9.29514 5.1579 9.4471C5.30968 9.59906 5.51554 9.68443 5.7302 9.68443C5.94485 9.68443 6.15071 9.59906 6.30249 9.4471C6.45428 9.29514 6.53955 9.08904 6.53955 8.87413V7.25353H13.0144V8.87413C13.0144 9.08904 13.0996 9.29514 13.2514 9.4471C13.4032 9.59906 13.6091 9.68443 13.8237 9.68443C14.0384 9.68443 14.2442 9.59906 14.396 9.4471C14.5478 9.29514 14.6331 9.08904 14.6331 8.87413V7.25353H17.0611C17.2758 7.25353 17.4816 7.3389 17.6334 7.49086C17.7852 7.64282 17.8705 7.84893 17.8705 8.06383V12.1153C17.8705 12.3302 17.9558 12.5363 18.1075 12.6883C18.2593 12.8403 18.4652 12.9256 18.6798 12.9256C18.8945 12.9256 19.1004 12.8403 19.2521 12.6883C19.4039 12.5363 19.4892 12.3302 19.4892 12.1153V8.06383C19.4892 7.41912 19.2334 6.80081 18.778 6.34492C18.3227 5.88904 17.7051 5.63293 17.0611 5.63293ZM6.53955 5.63293C6.53955 4.77331 6.88063 3.94889 7.48776 3.34105C8.0949 2.7332 8.91834 2.39172 9.77696 2.39172C10.6356 2.39172 11.459 2.7332 12.0662 3.34105C12.6733 3.94889 13.0144 4.77331 13.0144 5.63293H6.53955Z" fill="#757575"/>
            </svg>
        </div>
        <div class="icon">
            <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.86463 7.43722C8.62512 6.61688 9.50913 6.00026 10.4509 5.57618C13.5807 4.16691 17.3897 4.89416 19.7576 7.59891L21.3933 6.19766C21.4842 6.11981 21.63 6.19183 21.6387 6.31382L22.0455 11.8018C22.0505 11.8932 21.9662 11.9654 21.88 11.9436L16.5301 10.696C16.4082 10.6653 16.3625 10.5131 16.4534 10.4353L18.0858 9.03678C16.5209 7.26501 14.1035 6.67947 11.9755 7.35998C11.171 7.6158 10.4104 8.04792 9.75614 8.67029C8.85664 9.52531 8.29282 10.6218 8.06947 11.7812C7.95173 12.3998 7.34542 12.7955 6.73261 12.6507C6.14944 12.5143 5.78531 11.937 5.9007 11.3485C6.17247 9.91684 6.82963 8.55465 7.86463 7.43722ZM19.3205 14.4739C19.1032 15.6338 18.5361 16.7331 17.6338 17.5848C16.9764 18.21 16.213 18.6389 15.4145 18.8952C13.2865 19.5757 10.8658 18.9929 9.3042 17.2184L10.9366 15.8199C11.0275 15.742 10.979 15.5866 10.8599 15.5591L5.5072 14.3083C5.4178 14.2892 5.33342 14.3615 5.34169 14.4501L5.7457 19.9348C5.75718 20.0601 5.90028 20.1288 5.99115 20.051L7.62681 18.6497C9.99148 21.3573 13.8033 22.0878 16.9335 20.6725C17.8753 20.2484 18.7565 19.6285 19.5198 18.8114C20.5576 17.6972 21.2147 16.335 21.4865 14.9034C21.5991 14.3117 21.2378 13.7376 20.6546 13.6012C20.0446 13.4597 19.4383 13.8553 19.3205 14.4739Z" fill="#757575" stroke="white" stroke-width="0.3"/>
            </svg> 
        </div>
        <div class="icon">
            <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.8992 5.69505C17.6439 3.64823 14.7885 0.214172 9.77698 0.214172C4.76547 0.214172 1.91008 3.64823 0.654773 5.69505C0.266711 6.32345 0.0611572 7.04764 0.0611572 7.78644C0.0611572 8.52524 0.266711 9.24944 0.654773 9.87783C1.91008 11.9247 4.76547 15.3587 9.77698 15.3587C14.7885 15.3587 17.6439 11.9247 18.8992 9.87783C19.2873 9.24944 19.4928 8.52524 19.4928 7.78644C19.4928 7.04764 19.2873 6.32345 18.8992 5.69505ZM17.5192 9.02944C16.4412 10.7846 14.001 13.7381 9.77698 13.7381C5.55297 13.7381 3.11278 10.7846 2.03472 9.02944C1.80416 8.65593 1.68204 8.22552 1.68204 7.78644C1.68204 7.34736 1.80416 6.91695 2.03472 6.54344C3.11278 4.78833 5.55297 1.83478 9.77698 1.83478C14.001 1.83478 16.4412 4.78508 17.5192 6.54344C17.7498 6.91695 17.8719 7.34736 17.8719 7.78644C17.8719 8.22552 17.7498 8.65593 17.5192 9.02944Z" fill="#757575"/>
                <path d="M9.77693 3.73492C8.97655 3.73492 8.19415 3.97254 7.52867 4.41773C6.86318 4.86291 6.3445 5.49567 6.03821 6.23599C5.73192 6.9763 5.65178 7.79093 5.80792 8.57684C5.96407 9.36276 6.34948 10.0847 6.91543 10.6513C7.48138 11.2179 8.20245 11.6038 8.98744 11.7601C9.77244 11.9164 10.5861 11.8362 11.3256 11.5295C12.065 11.2229 12.697 10.7036 13.1417 10.0373C13.5864 9.37106 13.8237 8.58774 13.8237 7.78643C13.8224 6.7123 13.3956 5.68253 12.637 4.923C11.8784 4.16348 10.8498 3.73621 9.77693 3.73492ZM9.77693 10.2173C9.2967 10.2173 8.82726 10.0748 8.42797 9.80766C8.02868 9.54054 7.71747 9.16089 7.53369 8.7167C7.34992 8.27251 7.30184 7.78374 7.39552 7.31219C7.48921 6.84064 7.72046 6.40749 8.06003 6.06752C8.3996 5.72755 8.83224 5.49603 9.30324 5.40224C9.77423 5.30844 10.2624 5.35658 10.7061 5.54057C11.1498 5.72456 11.529 6.03613 11.7958 6.43589C12.0626 6.83565 12.205 7.30564 12.205 7.78643C12.205 8.43115 11.9492 9.04946 11.4938 9.50534C11.0385 9.96122 10.4209 10.2173 9.77693 10.2173Z" fill="#757575"/>
            </svg>
        </div>
    </div>
                </div>
                <div class="info">
                    <div class="type">${item.type}</div>
                    <div class="name">${item.title}</div>
                    <div class="info_bottom">
                        <div class="prices">
                            <div class="newPrice">$${newPrice}</div>
                            <div class="oldPrice"><s>$${oldPrice}</s></div>
                        </div>
                        <div class="rating">${generateStars(item.rating)}</div>
                    </div>
                </div>
            </div>
        `);

        //set the status color
        const $status = $good.find('.status');
        if (item.status === "New") {
            $status.css('background-color', '#00B7F1');
        } else if (item.status === "Sale") {
            $status.css('background-color', '#7AC751');
        }

        //append the element to the container
        $('.goodsCon').append($good);

        $('.pictureCon').hover(
            function() {
                $(this).find('.hoverIcons').css('opacity', '1')
            },
            function() {
                $(this).find('.hoverIcons').css('opacity', '0')
            }
        );
        
    }
})
.catch((error)=>{
    console.error('Error fetching goods:', error);
});

//function to generate star ratings
function generateStars(rating) {
    const totalStars = 5;
    let starsHtml = '';

    const filledStarSvg = `
      <svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3.62609 3.85757L3.93345 3.81496L4.07632 3.5395L5.36119 1.06219C5.36121 1.06215 5.36123 1.06211 5.36125 1.06207C5.3628 1.0591 5.36356 1.05854 5.36316 1.05896C5.36289 1.05924 5.36309 1.05891 5.36449 1.05812C5.368 1.05615 5.37763 1.05235 5.39231 1.05239C5.40705 1.05244 5.41757 1.05634 5.42225 1.05899L5.42422 1.06025L5.42465 1.06062L5.42469 1.06066L5.42486 1.06088L5.42616 1.06306L5.42618 1.06309L6.71058 3.5395L6.85344 3.81496L7.16081 3.85757L10.0358 4.25615L10.0362 4.2562C10.039 4.25659 10.0414 4.25703 10.0435 4.25748L7.97869 6.17083L7.73763 6.3942L7.79607 6.71761L8.28531 9.42531C8.27796 9.42979 8.26911 9.43276 8.2608 9.43348C8.25365 9.43411 8.24541 9.43341 8.23374 9.42757L8.23365 9.42752L5.66171 8.14197L5.39345 8.00789L5.12519 8.14197L2.55325 9.42752L2.5514 9.42845C2.53995 9.43422 2.53219 9.4348 2.52564 9.43423C2.51763 9.43354 2.50884 9.43059 2.50146 9.42597L2.99083 6.71761L3.04927 6.3942L2.8082 6.17083L0.74338 4.25748C0.745483 4.25703 0.747909 4.25659 0.750685 4.2562L0.751103 4.25615L3.62609 3.85757ZM8.28804 9.44028L8.87846 9.3336C8.96701 9.82574 8.42193 10.1925 7.96539 9.96421L8.28804 9.44028Z" fill="white" stroke="#7AC751" stroke-width="1.2"/>
      </svg>
    `;

    const emptyStarSvg = `
      <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M4.04296 3.85733L4.35032 3.81471L4.49319 3.53926L5.77806 1.06195C5.77808 1.06191 5.7781 1.06187 5.77812 1.06183C5.77967 1.05886 5.78044 1.0583 5.78003 1.05872C5.77976 1.05899 5.77996 1.05866 5.78136 1.05787C5.78487 1.0559 5.7945 1.0521 5.80918 1.05215C5.82392 1.05219 5.83444 1.0561 5.83912 1.05874L5.84109 1.06001L5.84152 1.06037L5.84156 1.06042L5.84173 1.06064L5.84303 1.06282L5.84305 1.06284L7.12745 3.53926L7.27031 3.81471L7.57768 3.85733L10.4527 4.2559L10.4531 4.25596C10.4559 4.25634 10.4583 4.25678 10.4604 4.25724L8.39556 6.17058L8.1545 6.39396L8.21294 6.71737L8.70218 9.42506C8.69483 9.42955 8.68598 9.43251 8.67767 9.43324C8.67052 9.43387 8.66228 9.43316 8.65061 9.42733L8.65052 9.42728L6.07858 8.14173L5.81032 8.00764L5.54206 8.14173L2.97012 9.42728L2.96827 9.42821C2.95682 9.43398 2.94906 9.43456 2.94251 9.43399C2.9345 9.43329 2.92571 9.43035 2.91833 9.42572L3.4077 6.71737L3.46614 6.39396L3.22507 6.17058L1.16025 4.25724C1.16235 4.25678 1.16478 4.25634 1.16756 4.25596L1.16797 4.2559L4.04296 3.85733ZM8.70491 9.44004L9.29533 9.33336C9.38388 9.8255 8.8388 10.1923 8.38226 9.96397L8.70491 9.44004Z" fill="white" stroke="#CCCCCC" stroke-width="1.2"/>
      </svg>
    `;

    for (let i = 0; i < totalStars; i++) {
        if (i < rating) {
            starsHtml += filledStarSvg;
        } else {
            starsHtml += emptyStarSvg;
        }
    }

    return starsHtml;
}
